<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>

        <title>Lab 5</title>
    </head>
    <body>
        <h1>
            Lab 5
        </h1>
        <br/>
        
        <h3>
            Connection Status:
        </h3>
        <p id="status">Not Connected</p>
        <br/>

        <h2>
            Connect:
        </h2>
        <form id = "con">
            <label for="sname">Server:</label><br>
            <input type="text" id="sname" name="sname" value="test.mosquitto.org" style="width:400px"><br><br>
            <label for="pname">Port:</label><br>
            <input type="text" id="pname" name="pname" value="8081" style="width:400px"><br><br>
            <input type="button" value="Start" onclick="MQTTconnect()">
            <input type="button" value="End" style="margin-bottom:10px; margin-left: 20px;" onclick="closeConnection()"><br><br>
        </form>
        <p id="constatus"></p>
        <br/>

        <h2>
            Subscribe to Topic:
        </h2>
        <form id="sub">
            <label for="tname">Subscription Topic:</label><br>
            <input type="text" id="tname" name="tname" value="engo651/zhiqiangjiang/my_temperature" style="width:400px"><br><br>
            <input type="button" value="Subscribe" onclick="subscribeTopic()"><br><br>
        </form>
        <p id="substatus"></p>
        <br/>

        <h2>
            Send Message:
        </h2>
        <form id="msg">
            <label for="mtname">Publish Topic:</label><br>
            <input type="text" id="mtname" name="mtname" style="width:400px"><br><br>
            <label for="msgtext">Message:</label><br>
            <input type="text" id="msgtext" name="msgtext" style="width:400px"><br><br>
            <input type="button" value="Send" onclick="sendMessage()"><br><br>
        </form>
        <p id="msgstatus"></p>
        <br/>

        <h3>
            Messages:
        </h3>
        <p id="messages">No Messages</p>
        <br/>
        <h3>
            Map:
        </h3>
        <form id="stat">
            <label for="coursename">Course:</label><br>
            <input type="text" id="crsname" name="crsname" value="engo651"><br><br>
            <p>+</p>
            <label for="yourname">Your Name:</label><br>
            <input type="text" id="yrname" name="yrname" value="zhiqiangjiang"><br><br>
            <p>+</p>
            <em>my_temperature</em><br><br>
            <input type="button" value="Share My Status" onclick="shareStatus()"><br><br>
        </form>
        <br/>
        <p id = "mstatus"></p>
        <div id="map" style="width: 600px; height: 400px; margin-top:10px;"></div>
        <script src="./script.js"></script>
    </body>
</html>